#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Hook pre-commit : GÃ©nÃ©ration automatique des documents..."

# VÃ©rifier si les fichiers de documentation ont Ã©tÃ© modifiÃ©s
if git diff --cached --name-only | grep -E "(UF-Zoom/docs/|UF-Zoom/Slide-Oral.md|Themes/)" > /dev/null; then
    echo "ğŸ“„ Fichiers de documentation modifiÃ©s, gÃ©nÃ©ration des documents..."
    
    # GÃ©nÃ©rer les documents
    if npm run build:docs; then
        echo "âœ… Documents gÃ©nÃ©rÃ©s avec succÃ¨s"
        
        # Ajouter les documents gÃ©nÃ©rÃ©s au commit
        git add UF-Zoom/docs/output/ UF-Zoom/output/
        echo "ğŸ“ Documents gÃ©nÃ©rÃ©s ajoutÃ©s au commit"
    else
        echo "âŒ Ã‰chec de la gÃ©nÃ©ration des documents"
        exit 1
    fi
else
    echo "â„¹ï¸  Aucune modification de documentation, pas de gÃ©nÃ©ration nÃ©cessaire"
fi

echo "âœ… Hook pre-commit terminÃ©" 